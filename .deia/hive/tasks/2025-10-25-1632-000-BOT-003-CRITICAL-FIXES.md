# BOT-003 CRITICAL FIXES - PORT 8000
**From:** Q33N (BEE-000)
**To:** BOT-003
**Issued:** 2025-10-25 16:32 CDT
**Due:** 2025-10-25 18:32 CDT (2 hours)
**Priority:** CRITICAL - Blocks all functionality

---

## ASSIGNMENT

Fix 5 CRITICAL blocking issues in the port 8000 chatbot controller web interface. These issues prevent the application from functioning at all.

---

## CRITICAL ISSUES TO FIX

### 1. Bot Launch Dialog Modal (BLOCKING)
**File:** `src/deia/adapters/web/app.py` (line ~50-120)
**Issue:** Bot launch dialog not functioning - modal doesn't appear or form doesn't submit
**Current State:** Visual exists but interaction broken
**Fix Required:**
- Verify modal HTML/CSS is correct
- Check JavaScript event handlers for form submission
- Ensure bot initialization happens after form submit
- Test: Can you launch a bot? Does dialog close? Does bot appear in UI?

### 2. selectBot() Function Missing/Broken (BLOCKING)
**File:** `src/deia/adapters/web/app.py` (search for `selectBot`)
**Issue:** Function doesn't exist or doesn't work - can't switch between bots
**Current State:** Function called but not defined or returns error
**Fix Required:**
- Create `selectBot(botId)` function if missing
- Function must: highlight selected bot, clear chat history, switch WebSocket connection
- Verify function is called when bot selected in UI
- Test: Click different bot names - do they highlight? Does chat clear?

### 3. Input Field Enable/Disable State (BLOCKING)
**File:** `src/deia/adapters/web/app.py` (search for input field management)
**Issue:** Message input stays disabled even when bot is running
**Current State:** User can't type or send commands
**Fix Required:**
- Find where input field is disabled/enabled
- Enable input ONLY when: bot is connected AND WebSocket is open
- Disable input when: no bot selected OR WebSocket disconnected
- Show visual feedback (grayed out, tooltip) when disabled
- Test: Launch bot → can you type? Kill connection → does input gray out?

### 4. Message Routing With Clear Feedback (BLOCKING)
**File:** `src/deia/adapters/web/app.py` (search for message sending)
**Issue:** Messages sent but no feedback - user doesn't know if command was received
**Current State:** User sends message → nothing visible happens
**Fix Required:**
- When user sends message: Add "Sending..." indicator
- When bot receives message: Confirm with bot's response
- If error: Show red error message with details
- Clear indicator when response arrives
- Test: Send command → see "Sending..." → see response → indicator clears

### 5. WebSocket Initialization/Connection (BLOCKING)
**File:** `src/deia/adapters/web/app.py` (search for WebSocket or ws://)
**Issue:** WebSocket never connects - no real-time communication with bot
**Current State:** WebSocket code exists but connection doesn't establish
**Fix Required:**
- Verify WebSocket URL is correct (check port number)
- Add connection event logging: onopen, onerror, onclose
- Handle reconnection on disconnect
- Verify bot is running and listening on correct port
- Test: Launch bot → check browser console → does WebSocket connect? Green indicator?

---

## PARALLEL TASK (Do simultaneously)

While fixing CRITICAL issues, also start:
**API Reference Documentation** (2 hours parallel)
- File: `.deia/docs/API-REFERENCE.md`
- Document all endpoints in `bot_service.py` (GET, POST)
- Include request/response examples
- Document error codes
- Document authentication if applicable
- Document rate limiting if applicable

---

## SUCCESS CRITERIA

All 5 CRITICAL issues must be:
- ✅ Fixed in code
- ✅ Tested (manual testing in browser)
- ✅ Verified working end-to-end
- ✅ Documented in status report

**AND**

- ✅ API Reference started (due 18:32 with status)
- ✅ All code committed or saved
- ✅ Status report uploaded to `.deia/hive/responses/deiasolutions/`

---

## STATUS REPORT LOCATION

**Due:** 2025-10-25 18:32 CDT

Create file: `.deia/hive/responses/deiasolutions/BOT-003-CRITICAL-FIXES-WINDOW-1-COMPLETE.md`

**Include:**
- Which issues fixed (all 5?)
- Testing evidence (screenshots, console logs)
- API Reference progress (% complete)
- Any blockers (if stuck, ask Q33N immediately)
- Time spent per issue
- Ready for next task? (YES/NO)

---

## RESOURCES

- Port 8000 application: `src/deia/adapters/web/app.py`
- Bot service API: `src/deia/services/bot_service.py`
- Design review (context): `.deia/hive/responses/deiasolutions/PORT-8000-DESIGN-REVIEW.md`
- Structural fixes (reference): `.deia/hive/responses/deiasolutions/PORT-8000-STRUCTURAL-FIXES.md`

---

## NOTES

- These are CRITICAL - nothing else works until these 5 are fixed
- Focus: Working functionality over perfect code
- If stuck on any issue > 15 min, file blocker immediately
- Autologging required: Update every 5-10 minutes
- Q33N monitors for progress - no pressure but stay focused

---

**Q33N - BEE-000**
**MOVE FAST, FIX CRITICAL ISSUES, REPORT STATUS AT 18:32**
